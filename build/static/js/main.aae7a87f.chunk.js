(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{147:function(e,t,n){},165:function(e,t,n){},236:function(e,t,n){},237:function(e,t,n){},238:function(e,t,n){},239:function(e,t,n){},240:function(e,t,n){},248:function(e,t,n){},249:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(28),a=(n(147),n(9)),s=n(10),o=n(11),i=n(12),u=n(68),l=n(22),d=n(38),j=n.n(d),b="/inventory",h="/api/users",O="/api/products",f={getAllUsers:function(){return j.a.get(h)},postRegister:function(e){return j.a.post("".concat(h,"/register"),{username:e})},postLogin:function(e){return j.a.post("".concat(h,"/login"),e)},postLogout:function(){return j.a.post("".concat(h,"/logout"))},patchUser:function(e,t,n,r,c){return j.a.patch("".concat(h),{id:e,username:t,userType:n,previousPassword:r,newPassword:c})},deleteUser:function(e){return j.a.delete("".concat(h,"/").concat(e))}},p={getAllProducts:function(){return j.a.get(O)},postAddProduct:function(e){return j.a.post("".concat(O,"/add"),e)},patchProduct:function(e){return j.a.patch(O,e)},deleteProduct:function(e){return j.a.delete("".concat(O,"/delete/").concat(e))}},m=function(){var e=localStorage.getItem("user");return e?JSON.parse(e):null},x=function(e){localStorage.setItem("user",JSON.stringify(e))},v=(n(165),n(3)),g=function(e){var t=e.username,n=function(){f.postLogout().then((function(e){200===e.status?(localStorage.removeItem("user"),window.location.reload()):console.log("There was an error logging out...")}))};return Object(v.jsxs)("div",{id:"navbar",children:[Object(v.jsx)("div",{className:"left",children:Object(v.jsx)("span",{children:t})}),Object(v.jsxs)("div",{className:"middle",children:["admin"===m().userType?Object(v.jsx)("a",{href:"/users",className:"/users"===window.location.pathname?"active":"",children:"Accounts"}):Object(v.jsx)(v.Fragment,{}),Object(v.jsx)("a",{href:"/inventory",className:"/inventory"===window.location.pathname?"active":"",children:"Inventory"}),"user"===m().userType?Object(v.jsx)("a",{href:"/edit",className:"/edit"===window.location.pathname?"active":"",children:"Edit"}):Object(v.jsx)(v.Fragment,{})]}),Object(v.jsx)("button",{className:"logout-button",onClick:function(){return n()},children:"Log out"})]})},y=n(5),P=n(253),S=n(252),E=function(e){var t=e.errorMessage,n=e.visible,c=e.onOk,a=e.onCancel,s=Object(r.useState)(""),o=Object(y.a)(s,2),i=o[0],u=o[1],l=function(){u("")},d=function(){c(i),l()};return Object(v.jsxs)(P.a,{title:"Add Account",visible:n,onOk:d,okText:"Add",onCancel:function(){a(),l()},children:[Object(v.jsx)("label",{children:Object(v.jsx)("strong",{children:"Username"})}),Object(v.jsx)(S.a,{value:i,onChange:function(e){return u(e.target.value.trim())},placeholder:"Enter username",onKeyPress:function(e){return"Enter"===e.key&&d()}}),Object(v.jsx)("p",{style:{color:"#f00"},children:t}),Object(v.jsx)("p",{children:"Note: Password will automatically generated."})]})},w=n(254),k=n(255),C=w.a.Option,A=function(e){var t=e.user,n=e.errorMessage,c=e.visible,a=e.onOk,s=e.onCancel,o=Object(r.useState)(""),i=Object(y.a)(o,2),u=i[0],l=i[1],d=Object(r.useState)(""),j=Object(y.a)(d,2),b=j[0],h=j[1],O=Object(r.useState)(!1),f=Object(y.a)(O,2),p=f[0],x=f[1],g=Object(r.useState)(""),E=Object(y.a)(g,2),A=E[0],N=E[1],D=Object(r.useState)(""),U=Object(y.a)(D,2),V=U[0],M=U[1],F=Object(r.useState)(""),K=Object(y.a)(F,2),L=K[0],T=K[1];Object(r.useEffect)((function(){Y()}),[t]);var Y=function(){null!=t&&(l(t.username),h(t.userType)),N(""),M(""),T("")},B=function(){a(u,b,p,A,V,L),Y(),x(!1)};return Object(v.jsxs)(P.a,{title:"Edit ".concat(u,"'s Password"),visible:c,onOk:B,okText:"Confirm",onCancel:function(){s(),Y(),x(!1)},children:[Object(v.jsx)("label",{children:Object(v.jsx)("strong",{children:"Username"})}),Object(v.jsx)(S.a,{value:u,onChange:function(e){return l(e.target.value.trim())},placeholder:"Enter username",onKeyPress:function(e){return"Enter"===e.key&&B()}}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsx)("label",{children:Object(v.jsx)("strong",{children:"Role"})}),Object(v.jsx)("br",{}),Object(v.jsxs)(w.a,{style:{width:"100%"},value:b,onChange:function(e){return h(e)},disabled:!t||m().username===t.username,children:[Object(v.jsx)(C,{value:"user",children:"user"}),Object(v.jsx)(C,{value:"admin",children:"admin"})]}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsx)(k.a,{checked:p,onChange:function(e){return x(e.target.checked)},children:"Edit Password"}),Object(v.jsx)("br",{}),Object(v.jsx)("label",{children:Object(v.jsx)("strong",{children:"Previous Password"})}),Object(v.jsx)(S.a,{type:"password",value:A,onChange:function(e){return N(e.target.value.trim())},placeholder:"Enter previous password",onKeyPress:function(e){return"Enter"===e.key&&B()},disabled:!p}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsx)("label",{children:Object(v.jsx)("strong",{children:"New Password"})}),Object(v.jsx)(S.a,{type:"password",value:V,onChange:function(e){return M(e.target.value.trim())},placeholder:"Enter current password",onKeyPress:function(e){return"Enter"===e.key&&B()},disabled:!p}),Object(v.jsx)("label",{children:Object(v.jsx)("strong",{children:"Confirm Password"})}),Object(v.jsx)(S.a,{type:"password",value:L,onChange:function(e){return T(e.target.value.trim())},placeholder:"Confirm your password",onKeyPress:function(e){return"Enter"===e.key&&B()},disabled:!p}),Object(v.jsx)("p",{style:{color:"#f00"},children:n})]})},N=n(251),D=n(250),U=n(19),V=n.n(U),M=function(e){var t=e.errorMessage,n=e.visible,c=e.onOk,a=e.onCancel,s=Object(r.useState)(""),o=Object(y.a)(s,2),i=o[0],u=o[1],l=Object(r.useState)(1),d=Object(y.a)(l,2),j=d[0],b=d[1],h=Object(r.useState)(1),O=Object(y.a)(h,2),f=O[0],p=O[1],m=Object(r.useState)(""),x=Object(y.a)(m,2),g=x[0],E=x[1],w=Object(r.useState)(""),k=Object(y.a)(w,2),C=k[0],A=k[1],U=Object(r.useState)(V()()),M=Object(y.a)(U,2),F=M[0],K=M[1],L=function(){u(""),b(1),p(1),E(""),A(""),K(V()())},T=function(){c(i,j,f,g,C,F),L()};return Object(v.jsxs)(P.a,{title:"Add Product",visible:n,onOk:T,okText:"Add",onCancel:function(){a(),L()},children:[Object(v.jsx)("label",{children:Object(v.jsx)("strong",{children:"Product Name"})}),Object(v.jsx)(S.a,{name:"product_name",value:i,onChange:function(e){return u(e.target.value)},placeholder:"Enter product name",onKeyPress:function(e){return"Enter"===e.key&&T()}}),Object(v.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(v.jsxs)("div",{children:[Object(v.jsx)("label",{children:Object(v.jsx)("strong",{children:"Quantity"})}),Object(v.jsx)(N.a,{name:"quantity",min:1,value:j,onChange:function(e){return b(e)},placeholder:"Enter quantity",onKeyPress:function(e){return"Enter"===e.key&&T()},style:{width:"100%"}})]}),Object(v.jsxs)("div",{children:[Object(v.jsx)("label",{children:Object(v.jsx)("strong",{children:"Price"})}),Object(v.jsx)(N.a,{name:"price",min:1,value:f,onChange:function(e){return p(e)},placeholder:"Enter price",onKeyPress:function(e){return"Enter"===e.key&&T()},style:{width:"100%"}})]})]}),Object(v.jsx)("label",{children:Object(v.jsx)("strong",{children:"Supplier"})}),Object(v.jsx)(S.a,{name:"supplier",value:g,onChange:function(e){return E(e.target.value)},placeholder:"Enter supplier",onKeyPress:function(e){return"Enter"===e.key&&T()}}),Object(v.jsx)("label",{children:Object(v.jsx)("strong",{children:"Stock Location"})}),Object(v.jsx)(S.a,{name:"location",value:C,onChange:function(e){return A(e.target.value)},placeholder:"Enter location",onKeyPress:function(e){return"Enter"===e.key&&T()}}),Object(v.jsx)("label",{children:Object(v.jsx)("strong",{children:"Date Purchased"})}),Object(v.jsx)("br",{}),Object(v.jsx)(D.a,{name:"date_purchased",value:F,format:"MMMM DD, YYYY",onChange:function(e){return K(e)},style:{width:"100%"}}),Object(v.jsx)("p",{style:{color:"#f00"},children:t})]})},F=function(e){var t=e.product,n=e.errorMessage,c=e.visible,a=e.onOk,s=e.onCancel,o=Object(r.useState)(""),i=Object(y.a)(o,2),u=i[0],l=i[1],d=Object(r.useState)(1),j=Object(y.a)(d,2),b=j[0],h=j[1],O=Object(r.useState)(1),f=Object(y.a)(O,2),p=f[0],m=f[1],x=Object(r.useState)(""),g=Object(y.a)(x,2),E=g[0],w=g[1],k=Object(r.useState)(""),C=Object(y.a)(k,2),A=C[0],U=C[1],M=Object(r.useState)(V()()),F=Object(y.a)(M,2),K=F[0],L=F[1];Object(r.useEffect)((function(){T()}),[t]);var T=function(){t&&(l(t.name),h(t.quantity),m(t.price),w(t.supplier),U(t.location),console.log(t.date),L(V()(t.date)))},Y=function(){a(u,b,p,E,A,K),T()};return Object(v.jsxs)(P.a,{title:"Edit Product",visible:c,onOk:Y,okText:"Edit",onCancel:function(){s(),T()},children:[Object(v.jsx)("label",{children:Object(v.jsx)("strong",{children:"Product Name"})}),Object(v.jsx)(S.a,{name:"product_name",value:u,onChange:function(e){return l(e.target.value)},placeholder:"Enter product name",onKeyPress:function(e){return"Enter"===e.key&&Y()}}),Object(v.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(v.jsxs)("div",{children:[Object(v.jsx)("label",{children:Object(v.jsx)("strong",{children:"Quantity"})}),Object(v.jsx)(N.a,{name:"quantity",min:1,value:b,onChange:function(e){return h(e)},placeholder:"Enter quantity",onKeyPress:function(e){return"Enter"===e.key&&Y()},style:{width:"100%"}})]}),Object(v.jsxs)("div",{children:[Object(v.jsx)("label",{children:Object(v.jsx)("strong",{children:"Price"})}),Object(v.jsx)(N.a,{name:"price",min:1,value:p,onChange:function(e){return m(e)},placeholder:"Enter price",onKeyPress:function(e){return"Enter"===e.key&&Y()},style:{width:"100%"}})]})]}),Object(v.jsx)("label",{children:Object(v.jsx)("strong",{children:"Supplier"})}),Object(v.jsx)(S.a,{name:"supplier",value:E,onChange:function(e){return w(e.target.value)},placeholder:"Enter supplier",onKeyPress:function(e){return"Enter"===e.key&&Y()}}),Object(v.jsx)("label",{children:Object(v.jsx)("strong",{children:"Stock Location"})}),Object(v.jsx)(S.a,{name:"location",value:A,onChange:function(e){return U(e.target.value)},placeholder:"Enter location",onKeyPress:function(e){return"Enter"===e.key&&Y()}}),Object(v.jsx)("label",{children:Object(v.jsx)("strong",{children:"Date Purchased"})}),Object(v.jsx)("br",{}),Object(v.jsx)(D.a,{name:"date_purchased",value:K,format:"MMMM DD, YYYY",onChange:function(e){return L(e)},style:{width:"100%"}}),Object(v.jsx)("p",{style:{color:"#f00"},children:n})]})},K=n.p+"static/media/Login Image.6954d3e8.svg",L=(n(236),function(){var e=Object(r.useState)(""),t=Object(y.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(""),s=Object(y.a)(a,2),o=s[0],i=s[1],u=Object(r.useState)(""),l=Object(y.a)(u,2),d=l[0],j=l[1],b=function(){var e={username:n,password:o};""!==n?""!==o?f.postLogin(e).then((function(e){if(200===e.status){var t=e.data.result;x(t),window.location.reload()}})).catch((function(e){401===e.response.status&&j("Invalid username or password")})):j("Password is empty"):j("Username is empty")};return Object(v.jsx)("div",{id:"login-page",children:Object(v.jsxs)("div",{className:"card",children:[Object(v.jsx)("p",{className:"title",children:"Login"}),Object(v.jsx)("p",{className:"sub-title",children:"Welcome back!"}),Object(v.jsx)("input",{type:"text",placeholder:"Username",value:n,onChange:function(e){return c(e.target.value.trim())},onKeyPress:function(e){return"Enter"===e.key&&b()}}),Object(v.jsx)("input",{type:"password",placeholder:"Password",value:o,onChange:function(e){return i(e.target.value.trim())},onKeyPress:function(e){return"Enter"===e.key&&b()}}),Object(v.jsx)("p",{className:"error-message",children:d}),Object(v.jsx)("img",{src:K,alt:"Login"}),Object(v.jsx)("button",{onClick:function(){return b()},children:"Sign in"})]})})}),T=n(39),Y=n(7),B=n(25),q=n.n(B),I=n.p+"static/media/Edit Icon.7ee14592.svg",R=n.p+"static/media/Trash Icon.5db8102e.svg",_=(n(237),function(e){Object(o.a)(n,e);var t=Object(i.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).state={users:[],searchValue:"",count:0,addAccountVisible:!1,editAccountVisible:!1,addAccountError:"",editAccountError:"",toBeEdited:null},r}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var e=this;f.getAllUsers().then((function(t){var n=t.data.result;e.setState({users:n,count:n.length})})).catch((function(e){console.log(e)}))}},{key:"onEdit",value:function(e,t,n,r,c,a){var s=this,o=this.state,i=o.toBeEdited,u=o.users;if(null!=i){if(""===e||null===e)return void this.setState({editAccountError:"Username cannot be empty"});if(e.length<6)return void this.setState({editAccountError:"Username has to be at least 6 characters"});if(e.length>30)return void this.setState({editAccountError:"Username has to be atmost 30 characters"});if(e.includes(" "))return void this.setState({editAccountError:"Username cannot contain a space"});if(!n&&e===i.username&&t===i.userType)return void this.setState({editAccountError:"Cannot proceed. No changes has been done"});if("user"!==t&&"admin"!==t)return void this.setState({editAccountError:"Role can only be either `user` or `admin`"});if(n){if(""===r||null===r)return void this.setState({editAccountError:"Previous password cannot be empty"});if(""===c||null===c)return void this.setState({editAccountError:"New password cannot be empty"});if(""===a||null===a)return void this.setState({editAccountError:"Confirm password cannot be empty"});if(r.length<6||c.length<6||a.length<6)return void this.setState({editAccountError:"Password has to be at least 6 characters"});if(r.length>30||c.length>30||a.length>30)return void this.setState({editAccountError:"Password has to be atmost 30 characters"});if(c!==a)return void this.setState({editAccountError:"New password and confirm password doesn't match"})}else r=null,c=null;f.patchUser(i._id,e,t,r,c).then((function(t){var n=t.data.result;P.a.success({content:"User has been successfully updated"});var r=u.indexOf(i);m().username===i.username&&(x(n),s.props.updateUser(e)),s.setState({editAccountVisible:!1,toBeEdited:null,users:[].concat(Object(Y.a)(u.slice(0,r)),[n],Object(Y.a)(u.slice(r+1))),editAccountError:""})})).catch((function(e){var t=e.response.data;s.setState({editAccountError:t})}))}}},{key:"onDelete",value:function(e){var t=this,n=this.state.users;P.a.confirm({title:"Are you sure you want to delete ".concat(e.username),onOk:function(){var r=Object(T.a)(q.a.mark((function r(){return q.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:f.deleteUser(e._id).then((function(){var r=n.indexOf(e),c=[].concat(Object(Y.a)(n.slice(0,r)),Object(Y.a)(n.slice(r+1)));t.setState({users:c,count:c.length}),P.a.success({content:"User has been successfully deleted."})})).catch((function(e){console.log(e.response.data)}));case 1:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}()})}},{key:"addAccount",value:function(e){var t=this,n=this.state,r=n.users,c=n.count;""!==e&&null!==e?e.length<6?this.setState({addAccountError:"Username has to be at least 6 characters"}):e.length>30?this.setState({addAccountError:"Username has to be atmost 30 characters"}):e.includes(" ")?this.setState({addAccountError:"Username cannot contain a space"}):f.postRegister(e).then((function(e){var n=e.data.result;t.setState({users:[].concat(Object(Y.a)(r),[n]),count:c+1,addAccountVisible:!1,addAccountError:""}),P.a.info({title:"Password",content:Object(v.jsxs)("div",{children:["Password: ",n.password]})})})).catch((function(e){11e3===e.response.data.error.code&&t.setState({addAccountError:"Username already exists"})})):this.setState({addAccountError:"Username cannot be empty"})}},{key:"render",value:function(){var e=this,t=this.state,n=t.users,r=t.searchValue,c=t.count,a=t.addAccountVisible,s=t.addAccountError,o=t.editAccountVisible,i=t.editAccountError,u=t.toBeEdited;return Object(v.jsxs)("div",{id:"users-page",children:[Object(v.jsxs)("div",{className:"header",children:[Object(v.jsxs)("div",{children:[Object(v.jsx)("input",{className:"search-input",placeholder:"Search",onChange:function(t){return e.setState({searchValue:t.target.value.trim()})},value:r}),Object(v.jsx)("button",{className:"add-account-button",onClick:function(){return e.setState({addAccountVisible:!0})},children:"Add Account"})]}),Object(v.jsxs)("div",{className:"user-stats",children:["Accounts: ",Object(v.jsx)("span",{className:"count",children:c})]})]}),Object(v.jsxs)("table",{children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Username"}),Object(v.jsx)("th",{children:"Role"}),Object(v.jsx)("th",{children:"Operations"})]})}),Object(v.jsx)("tbody",{children:n.filter((function(e){return e.username.toLowerCase().includes(r.toLowerCase())})).map((function(t){return Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:t.username}),Object(v.jsx)("td",{children:t.userType}),Object(v.jsxs)("td",{children:[Object(v.jsx)("button",{className:"edit-button",onClick:function(){return e.setState({editAccountVisible:!0,toBeEdited:t})},children:Object(v.jsx)("img",{src:I,alt:"Edit"})}),Object(v.jsx)("button",{className:"delete-button",onClick:function(){return e.onDelete(t)},disabled:t.username===m().username,children:Object(v.jsx)("img",{src:R,alt:"Delete"})})]})]})}))})]}),Object(v.jsx)(E,{visible:a,onOk:function(t){return e.addAccount(t)},onCancel:function(){return e.setState({addAccountVisible:!1,addAccountError:""})},errorMessage:s}),Object(v.jsx)(A,{user:u,visible:o,onOk:function(t,n,r,c,a,s){return e.onEdit(t,n,r,c,a,s)},onCancel:function(){return e.setState({editAccountVisible:!1,editAccountError:""})},errorMessage:i})]})}}]),n}(r.Component)),Q=(n(238),D.a.RangePicker),J=function(e){Object(o.a)(n,e);var t=Object(i.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).state={searchValue:"",products:[],count:0,toBeEdited:null,addProductVisible:!1,addProductError:"",editProductVisible:!1,editProductError:"",fromDateFilter:null,toDateFilter:null},r}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var e=this;p.getAllProducts().then((function(t){var n=t.data.result;e.setState({products:n,count:n.length})}))}},{key:"addProduct",value:function(e,t,n,r,c,a){var s=this,o=this.state,i=o.products,u=o.count;if(e=e.trim(),r=r.trim(),c=c.trim(),null!==e&&""!==e)if(t<1)this.setState({addProductError:"Quantity has to be greater than 0"});else if(n<1)this.setState({addProductError:"Price has to be greater than 0"});else if(null!==r&&""!==r)if(null!==c&&""!==c)if(null!==a){var l={supplier:r,location:c,date:a,name:e,quantity:t,price:n};p.postAddProduct(l).then((function(e){var t=e.data.result;s.setState({products:[].concat(Object(Y.a)(i),[t]),count:u+1,addProductVisible:!1,addProductError:""}),P.a.success({content:"Product has been successfully added."})})).catch((function(e){11e3===e.response.data.error.code&&s.setState({addProductError:"Product name already exists"})}))}else this.setState({addProductError:"Date Purchased cannot be empty"});else this.setState({addProductError:"Stock Location cannot be empty"});else this.setState({addProductError:"Supplier cannot empty"});else this.setState({addProductError:"Product Name cannot be empty"})}},{key:"editProduct",value:function(e,t,n,r,c,a){var s=this,o=this.state,i=o.products,u=o.toBeEdited;if(e=e.trim(),r=r.trim(),c=c.trim(),null!==e&&""!==e)if(t<1)this.setState({editProductError:"Quantity has to be greater than 0"});else if(n<1)this.setState({editProductError:"Price has to be greater than 0"});else if(null!==r&&""!==r)if(null!==c&&""!==c)if(null!==a){var l=V()(u.date),d=V()(a);if(l.format("MMMM DD, YYYY")!==d.format("MMMM DD, YYYY")||u.name!==e||u.quantity!==t||u.price!==n||u.price!==n||u.location!==c||u.supplier!==r){var j={supplier:r,location:c,date:a,name:e,quantity:t,prevName:u.name,price:n};p.patchProduct(j).then((function(e){var t=e.data.result;console.log(t),P.a.success({content:"Product has been successfully updated."});var n=i.indexOf(u);s.setState({products:[].concat(Object(Y.a)(i.slice(0,n)),[t],Object(Y.a)(i.slice(n+1))),toBeEdited:null,editProductVisible:!1,editProductError:""})})).catch((function(e){var t=e.response.data;s.setState({editProductError:t})}))}else this.setState({editProductError:"There were no changes made"})}else this.setState({editProductError:"Date Purchased cannot be empty"});else this.setState({editProductError:"Stock Location cannot be empty"});else this.setState({editProductError:"Supplier cannot be empty"});else this.setState({editProductError:"Product Name cannot be empty"})}},{key:"onDelete",value:function(e){var t=this,n=this.state.products;P.a.confirm({title:"Are you sure you want to delete ".concat(e.name),onOk:function(){var r=Object(T.a)(q.a.mark((function r(){return q.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:p.deleteProduct(e.name).then((function(){var r=n.indexOf(e),c=[].concat(Object(Y.a)(n.slice(0,r)),Object(Y.a)(n.slice(r+1)));t.setState({products:c,count:c.length}),P.a.success({content:"Product has been successfully deleted."})})).catch((function(e){console.log(e.response.data)}));case 1:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}()})}},{key:"resetFilter",value:function(){this.setState({searchValue:"",fromDateFilter:null,toDateFilter:null})}},{key:"render",value:function(){var e=this,t=this.state,n=t.searchValue,r=t.products,c=t.count,a=t.addProductVisible,s=t.addProductError,o=t.editProductVisible,i=t.editProductError,u=t.toBeEdited,l=t.fromDateFilter,d=t.toDateFilter;return Object(v.jsxs)("div",{id:"admin-inventory",children:[Object(v.jsxs)("div",{className:"header",children:[Object(v.jsxs)("div",{className:"left",children:[Object(v.jsx)("input",{className:"search-input",placeholder:"Search",onChange:function(t){return e.setState({searchValue:t.target.value})},value:n}),Object(v.jsx)(Q,{ranges:{Today:[V()(),V()()],"This Month":[V()().startOf("month"),V()().endOf("month")]},value:[l,d],onChange:function(t){return e.setState({fromDateFilter:null===t?null:t[0],toDateFilter:null===t?null:t[1]})},bordered:!1}),Object(v.jsx)("button",{className:"header-product-button",onClick:function(){return e.resetFilter()},children:"Reset Filter"}),Object(v.jsx)("button",{className:"header-product-button",onClick:function(){return e.setState({addProductVisible:!0})},children:"Add Product"})]}),Object(v.jsxs)("div",{className:"product-stats",children:["Products: ",Object(v.jsx)("span",{className:"count",children:c})]})]}),Object(v.jsxs)("table",{children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Date Purchased"}),Object(v.jsx)("th",{children:"Product Name"}),Object(v.jsx)("th",{children:"Supplier"}),Object(v.jsx)("th",{children:"Quantity"}),Object(v.jsx)("th",{children:"Price"}),Object(v.jsx)("th",{children:"Location"}),Object(v.jsx)("th",{children:"Operations"})]})}),Object(v.jsx)("tbody",{children:r.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())&&(null===l||null===d||V()(e.date)>=l&&V()(e.date)<=d)})).map((function(t){return Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:t.dateString}),Object(v.jsx)("td",{children:t.name}),Object(v.jsx)("td",{children:t.supplier}),Object(v.jsx)("td",{children:t.quantity}),Object(v.jsxs)("td",{children:["P ",parseFloat(t.price).toLocaleString("en-US",{minimumFractionDigits:2})]}),Object(v.jsx)("td",{children:t.location}),Object(v.jsxs)("td",{children:[Object(v.jsx)("button",{className:"edit-button",onClick:function(){return e.setState({editProductVisible:!0,toBeEdited:t})},children:Object(v.jsx)("img",{src:I,alt:"Edit"})}),Object(v.jsx)("button",{className:"delete-button",onClick:function(){return e.onDelete(t)},children:Object(v.jsx)("img",{src:R,alt:"Delete"})})]})]},t.name)}))})]}),Object(v.jsx)(M,{errorMessage:s,visible:a,onOk:function(t,n,r,c,a,s){return e.addProduct(t,n,r,c,a,s)},onCancel:function(){return e.setState({addProductVisible:!1,addProductError:""})}}),Object(v.jsx)(F,{product:u,errorMessage:i,visible:o,onOk:function(t,n,r,c,a,s){return e.editProduct(t,n,r,c,a,s)},onCancel:function(){return e.setState({editProductVisible:!1,editProductError:""})}})]})}}]),n}(r.Component),W=(n(239),D.a.RangePicker),z=function(e){Object(o.a)(n,e);var t=Object(i.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).state={searchValue:"",products:[],fromDateFilter:null,toDateFilter:null},r}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var e=this;p.getAllProducts().then((function(t){var n=t.data.result;e.setState({products:n})}))}},{key:"resetFilter",value:function(){this.setState({searchValue:"",fromDateFilter:null,toDateFilter:null})}},{key:"render",value:function(){var e=this,t=this.state,n=t.searchValue,r=t.products,c=t.fromDateFilter,a=t.toDateFilter;return Object(v.jsxs)("div",{id:"user-inventory",children:[Object(v.jsxs)("div",{className:"header",children:[Object(v.jsxs)("div",{children:[Object(v.jsx)("input",{className:"search-input",placeholder:"Search",onChange:function(t){return e.setState({searchValue:t.target.value})},value:n}),Object(v.jsx)(W,{ranges:{Today:[V()(),V()()],"This Month":[V()().startOf("month"),V()().endOf("month")]},value:[c,a],onChange:function(t){return e.setState({fromDateFilter:null===t?null:t[0],toDateFilter:null===t?null:t[1]})},bordered:!1}),Object(v.jsx)("button",{className:"header-product-button",onClick:function(){return e.resetFilter()},children:"Reset Filter"})]}),Object(v.jsx)(v.Fragment,{})]}),Object(v.jsxs)("table",{children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Product Name"}),Object(v.jsx)("th",{children:"Supplier"}),Object(v.jsx)("th",{children:"Quantity"}),Object(v.jsx)("th",{children:"Date Purchased"})]})}),Object(v.jsx)("tbody",{children:r.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())&&(null===c||null===a||V()(e.date)>=c&&V()(e.date)<=a)})).map((function(e){return Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:e.name}),Object(v.jsx)("td",{children:e.supplier}),Object(v.jsx)("td",{children:e.quantity}),Object(v.jsx)("td",{children:e.dateString})]},e.name)}))})]})]})}}]),n}(r.Component),G=(n(240),function(e){var t=e.updateUser,n=m(),c=Object(r.useState)(n.username),a=Object(y.a)(c,2),s=a[0],o=a[1],i=Object(r.useState)(""),u=Object(y.a)(i,2),l=u[0],d=u[1],j=Object(r.useState)(!1),b=Object(y.a)(j,2),h=b[0],O=b[1],p=Object(r.useState)(""),g=Object(y.a)(p,2),S=g[0],E=g[1],w=Object(r.useState)(""),C=Object(y.a)(w,2),A=C[0],N=C[1],D=Object(r.useState)(""),U=Object(y.a)(D,2),V=U[0],M=U[1],F=function(e){if(e.preventDefault(),d(""),E(""),N(""),""!==s&&null!==s){if(s.length<6)return M("Username has to be atleast 6 characters"),void o(n.username);if(s.length>30)return M("Username has to be atmost 30 characters"),void o(n.username);if(s.includes(" "))return M("Username cannot contain a space"),void o(n.username);if(h){if(""===l||null===l)return void M("Previous password cannot be empty");if(""===S||null===S)return void M("Previous password cannot be empty");if(""===A||null===A)return void M("Previous password cannot be empty");if(l.length<6||S.length<6||A.length<6)return void M("Password has to be atleast 6 characters");if(l.length>30||S.length>30||A.length>30)return void M("Password has to be atmost 30 characters");if(l===S&&l===A)return void M("Previous password and the new password is the same");if(S!==A)return void M("New password and confirm new password must be the same.")}else if(s===n.username)return void M("Username cannot be the same");f.patchUser(n._id,s,"user",h?l:null,h?S:null).then((function(e){var n=e.data.result;x(n),M(""),t(n.username),P.a.success({content:"Successfully edited the account"})})).catch((function(e){var t=e.response.data;M(t)}))}else M("Username cannot be empty")(n.username)};return Object(v.jsxs)("div",{id:"user-edit-account",children:[Object(v.jsx)("h1",{children:"Edit Account"}),Object(v.jsx)("input",{placeholder:"Username",value:s,onChange:function(e){return o(e.target.value.trim())},onKeyPress:function(e){return"Enter"===e.key&&F(e)}}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsx)(k.a,{checked:h,onChange:function(e){return O(e.target.checked)},children:"Edit Password"}),Object(v.jsx)("br",{}),Object(v.jsx)("input",{type:"password",placeholder:"Previous Password",value:l,onChange:function(e){return d(e.target.value.trim())},disabled:!h,onKeyPress:function(e){return"Enter"===e.key&&F(e)}}),Object(v.jsx)("br",{}),Object(v.jsx)("input",{type:"password",placeholder:"New Password",value:S,onChange:function(e){return E(e.target.value.trim())},disabled:!h,onKeyPress:function(e){return"Enter"===e.key&&F(e)}}),Object(v.jsx)("input",{type:"password",placeholder:"Confirm New Password",value:A,onChange:function(e){return N(e.target.value.trim())},disabled:!h,onKeyPress:function(e){return"Enter"===e.key&&F(e)}}),Object(v.jsx)("div",{className:"error-message",children:V}),Object(v.jsx)("button",{className:"confirm-button",onClick:function(e){return F(e)},children:"Confirm"})]})}),H=n(2),X=n(14),Z=["component"],$=function(e){var t=e.component,n=Object(X.a)(e,Z);return Object(v.jsx)(l.b,Object(H.a)(Object(H.a)({},n),{},{render:function(e){return m()?"user"===m().userType?Object(v.jsx)(l.a,{to:{pathname:b,state:{from:e.location}}}):Object(v.jsx)(t,Object(H.a)({},e)):Object(v.jsx)(l.a,{to:{pathname:"/",state:{from:e.location}}})}}))},ee=["component"],te=function(e){var t=e.component,n=Object(X.a)(e,ee);return Object(v.jsx)(l.b,Object(H.a)(Object(H.a)({},n),{},{render:function(e){return m()?Object(v.jsx)(t,Object(H.a)({},e)):Object(v.jsx)(l.a,{to:{pathname:"/",state:{from:e.location}}})}}))},ne=["component"],re=function(e){var t=e.component,n=Object(X.a)(e,ne);return Object(v.jsx)(l.b,Object(H.a)(Object(H.a)({},n),{},{render:function(e){return m()?"admin"===m().userType?Object(v.jsx)(l.a,{to:{pathname:"/users"}}):Object(v.jsx)(l.a,{to:{pathname:b}}):Object(v.jsx)(t,Object(H.a)({},e))}}))},ce=(n(248),function(e){Object(o.a)(n,e);var t=Object(i.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).state={username:""},r}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.setState({username:m()?m().username:""})}},{key:"render",value:function(){var e=this,t=this.state.username;return Object(v.jsx)(u.a,{children:Object(v.jsxs)("div",{className:"app",children:[Object(v.jsxs)(l.d,{children:[Object(v.jsx)($,{path:"/users",component:function(){return Object(v.jsx)(g,{username:t})}}),Object(v.jsx)(te,{path:"/inventory",component:function(){return Object(v.jsx)(g,{username:t})}}),Object(v.jsx)(te,{path:"/edit",component:function(){return Object(v.jsx)(g,{username:t})}}),Object(v.jsx)(l.b,{path:"/",component:function(){return Object(v.jsx)(v.Fragment,{})}})]}),Object(v.jsxs)(l.d,{children:[Object(v.jsx)($,{path:"/users",component:function(){return Object(v.jsx)(_,{updateUser:function(t){return e.setState({username:t})}})}}),Object(v.jsx)(te,{path:"/inventory",component:m()?"user"===m().userType?z:J:null}),Object(v.jsx)(te,{path:"/edit",component:function(){return Object(v.jsx)(G,{updateUser:function(t){return e.setState({username:t})}})}}),Object(v.jsx)(re,{path:"/",component:L})]})]})})}}]),n}(r.Component));Object(c.render)(Object(v.jsx)(ce,{}),document.getElementById("root"))}},[[249,1,2]]]);
//# sourceMappingURL=main.aae7a87f.chunk.js.map