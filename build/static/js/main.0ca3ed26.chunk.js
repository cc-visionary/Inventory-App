(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{142:function(e,t,n){},160:function(e,t,n){},231:function(e,t,n){},232:function(e,t,n){},233:function(e,t,n){},234:function(e,t,n){},235:function(e,t,n){},243:function(e,t,n){},244:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(23),s=(n(142),n(9)),a=n(10),o=n(13),i=n(14),u=n(64),l=n(21),d=n(52),j=n.n(d),b="/api/users",h={getAllUsers:function(){return j.a.get(b)},postRegister:function(e){return j.a.post("".concat(b,"/register"),{username:e})},postLogin:function(e){return j.a.post("".concat(b,"/login"),e)},postLogout:function(){return j.a.post("".concat(b,"/logout"))},patchUser:function(e,t,n,r,c){return j.a.patch("".concat(b),{id:e,username:t,userType:n,previousPassword:r,newPassword:c})},deleteUser:function(e){return j.a.delete("".concat(b,"/").concat(e))}},O=function(){var e=localStorage.getItem("user");return e?JSON.parse(e):null},m=function(e){localStorage.setItem("user",JSON.stringify(e))},f=(n(160),n(3)),p=function(e){var t=e.username,n=function(){h.postLogout().then((function(e){200===e.status?(localStorage.removeItem("user"),window.location.reload()):console.log("There was an error logging out...")}))};return Object(f.jsxs)("div",{id:"navbar",children:[Object(f.jsx)("div",{className:"left",children:"user"===O().userType?Object(f.jsx)("span",{children:t}):Object(f.jsx)(f.Fragment,{})}),Object(f.jsxs)("div",{className:"middle",children:["admin"===O().userType?Object(f.jsx)("a",{href:"/users",className:"/users"===window.location.pathname?"active":"",children:"Accounts"}):Object(f.jsx)(f.Fragment,{}),Object(f.jsx)("a",{href:"/inventory",className:"/inventory"===window.location.pathname?"active":"",children:"Inventory"}),"user"===O().userType?Object(f.jsx)("a",{href:"/edit",className:"/edit"===window.location.pathname?"active":"",children:"Edit"}):Object(f.jsx)(f.Fragment,{})]}),Object(f.jsx)("button",{className:"logout-button",onClick:function(){return n()},children:"Log out"})]})},x=n(5),v=n(246),g=n(245),y=function(e){var t=e.errorMessage,n=e.visible,c=e.onOk,s=e.onCancel,a=Object(r.useState)(""),o=Object(x.a)(a,2),i=o[0],u=o[1],l=function(){u("")},d=function(){c(i),l()};return Object(f.jsxs)(v.a,{title:"Add Account",visible:n,onOk:d,okText:"Create",onCancel:function(){s(),l()},children:[Object(f.jsx)("label",{children:Object(f.jsx)("strong",{children:"Username"})}),Object(f.jsx)(g.a,{value:i,onChange:function(e){return u(e.target.value)},placeholder:"Enter username",onKeyPress:function(e){return"Enter"===e.key&&d()}}),Object(f.jsx)("p",{style:{color:"#f00"},children:t}),Object(f.jsx)("p",{children:"Note: Password will automatically generated."})]})},w=n(247),S=n(248),E=w.a.Option,A=function(e){var t=e.user,n=e.errorMessage,c=e.visible,s=e.onOk,a=e.onCancel,o=Object(r.useState)(""),i=Object(x.a)(o,2),u=i[0],l=i[1],d=Object(r.useState)(""),j=Object(x.a)(d,2),b=j[0],h=j[1],m=Object(r.useState)(!1),p=Object(x.a)(m,2),y=p[0],A=p[1],C=Object(r.useState)(""),P=Object(x.a)(C,2),k=P[0],N=P[1],U=Object(r.useState)(""),V=Object(x.a)(U,2),T=V[0],I=V[1],D=Object(r.useState)(""),L=Object(x.a)(D,2),K=L[0],B=L[1];Object(r.useEffect)((function(){null!=t&&(l(t.username),h(t.userType))}),[t]);var M=function(){null!=t&&l(t.username),N(""),I(""),B("")},F=function(){s(u,b,y,k,T,K),M()};return Object(f.jsxs)(v.a,{title:"Edit ".concat(u,"'s Password"),visible:c,onOk:F,okText:"Confirm",onCancel:function(){a(),M()},children:[Object(f.jsx)("label",{children:Object(f.jsx)("strong",{children:"Username"})}),Object(f.jsx)(g.a,{value:u,onChange:function(e){return l(e.target.value)},placeholder:"Enter username",onKeyPress:function(e){return"Enter"===e.key&&F()}}),Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),Object(f.jsx)("label",{children:Object(f.jsx)("strong",{children:"Role"})}),Object(f.jsx)("br",{}),Object(f.jsxs)(w.a,{style:{width:"100%"},value:b,onChange:function(e){return h(e)},disabled:!t||O().username===t.username,children:[Object(f.jsx)(E,{value:"user",children:"user"}),Object(f.jsx)(E,{value:"admin",children:"admin"})]}),Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),Object(f.jsx)(S.a,{checked:y,onChange:function(e){return A(e.target.checked)},children:"Edit Password"}),Object(f.jsx)("br",{}),Object(f.jsx)("label",{children:Object(f.jsx)("strong",{children:"Previous Password"})}),Object(f.jsx)(g.a,{value:k,onChange:function(e){return N(e.target.value)},placeholder:"Enter previous password",onKeyPress:function(e){return"Enter"===e.key&&F()},disabled:!y}),Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),Object(f.jsx)("label",{children:Object(f.jsx)("strong",{children:"New Password"})}),Object(f.jsx)(g.a,{value:T,onChange:function(e){return I(e.target.value)},placeholder:"Enter current password",onKeyPress:function(e){return"Enter"===e.key&&F()},disabled:!y}),Object(f.jsx)("label",{children:Object(f.jsx)("strong",{children:"Confirm Password"})}),Object(f.jsx)(g.a,{value:K,onChange:function(e){return B(e.target.value)},placeholder:"Confirm your password",onKeyPress:function(e){return"Enter"===e.key&&F()},disabled:!y}),Object(f.jsx)("p",{style:{color:"#f00"},children:n})]})},C=n.p+"static/media/Login Image.6954d3e8.svg",P=(n(231),function(){var e=Object(r.useState)(""),t=Object(x.a)(e,2),n=t[0],c=t[1],s=Object(r.useState)(""),a=Object(x.a)(s,2),o=a[0],i=a[1],u=Object(r.useState)(""),l=Object(x.a)(u,2),d=l[0],j=l[1],b=function(){var e={username:n,password:o};""!==n?""!==o?h.postLogin(e).then((function(e){if(200===e.status){var t=e.data.result;m(t),window.location.reload()}})).catch((function(e){401===e.response.status&&j("Invalid username or password")})):j("Password is empty"):j("Username is empty")};return Object(f.jsx)("div",{id:"login-page",children:Object(f.jsxs)("div",{className:"card",children:[Object(f.jsx)("p",{className:"title",children:"Login"}),Object(f.jsx)("p",{className:"sub-title",children:"Welcome back!"}),Object(f.jsx)("input",{type:"text",placeholder:"Username",value:n,onChange:function(e){return c(e.target.value)},onKeyPress:function(e){return"Enter"===e.key&&b()}}),Object(f.jsx)("input",{type:"password",placeholder:"Password",value:o,onChange:function(e){return i(e.target.value)},onKeyPress:function(e){return"Enter"===e.key&&b()}}),Object(f.jsx)("p",{className:"error-message",children:d}),Object(f.jsx)("img",{src:C,alt:"Login"}),Object(f.jsx)("button",{onClick:function(){return b()},children:"Sign in"})]})})}),k=n(41),N=n(7),U=n(25),V=n.n(U),T=n.p+"static/media/Edit Icon.7ee14592.svg",I=n.p+"static/media/Trash Icon.5db8102e.svg",D=(n(232),function(e){Object(o.a)(n,e);var t=Object(i.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).state={users:[],searchValue:"",count:0,addAccountVisible:!1,editAccountVisible:!1,addAccountError:"",editAccountError:"",toBeEdited:null},r}return Object(a.a)(n,[{key:"componentDidMount",value:function(){var e=this;h.getAllUsers().then((function(t){var n=t.data.result;e.setState({users:n,count:n.length})})).catch((function(e){console.log(e)}))}},{key:"onEdit",value:function(e,t,n,r,c,s){var a=this,o=this.state,i=o.toBeEdited,u=o.users;if(null!=i){if(""===e||null===e)return void this.setState({editAccountError:"Username cannot be empty"});if(e.length<6)return void this.setState({editAccountError:"Username has to be atleast 6 characters"});if(e.length>30)return void this.setState({editAccountError:"Username has to be atmost 30 characters"});if(e.includes(" "))return void this.setState({editAccountError:"Username cannot contain a space"});if(!n&&e===i.username&&t===i.userType)return void this.setState({editAccountError:"Cannot proceed. No changes has been done"});if("user"!==t&&"admin"!==t)return void this.setState({editAccountError:"Role can only be either `user` or `admin`"});if(n){if(""===r||null===r)return void this.setState({editAccountError:"Previous password cannot be empty"});if(""===c||null===c)return void this.setState({editAccountError:"New password cannot be empty"});if(""===s||null===s)return void this.setState({editAccountError:"Confirm password cannot be empty"});if(console.log([r,c,s]),r.length<6||c.length<6||s.length<6)return void this.setState({editAccountError:"Password has to be atleast 6 characters"});if(r.length>30||c.length>30||s.length>30)return void this.setState({editAccountError:"Password has to be atmost 30 characters"});if(c!==s)return void this.setState({editAccountError:"New password and confirm password doesn't match"})}else r=null,c=null;h.patchUser(i._id,e,t,r,c).then((function(e){var t=e.data.result;alert("Update was successful");var n=u.indexOf(i);O().username===i.username&&m(t),a.setState({editAccountVisible:!1,toBeEdited:null,users:[].concat(Object(N.a)(u.slice(0,n)),[t],Object(N.a)(u.slice(n+1))),editAccountError:""})})).catch((function(e){var t=e.response.data;a.setState({editAccountError:t})}))}}},{key:"onDelete",value:function(e){var t=this,n=this.state.users;v.a.confirm({title:"Are you sure you want to delete ".concat(e.username),onOk:function(){var r=Object(k.a)(V.a.mark((function r(){return V.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:h.deleteUser(e._id).then((function(){var r=n.indexOf(e),c=[].concat(Object(N.a)(n.slice(0,r)),Object(N.a)(n.slice(r+1)));t.setState({users:c,count:c.length}),alert("Deletion was successful")})).catch((function(e){console.log(e.response.data)}));case 1:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}()})}},{key:"addAccount",value:function(e){var t=this,n=this.state,r=n.users,c=n.count;""!==e&&null!==e?e.length<6?this.setState({addAccountError:"Username has to be atleast 6 characters"}):e.length>30?this.setState({addAccountError:"Username has to be atmost 30 characters"}):e.includes(" ")?this.setState({addAccountError:"Username cannot contain a space"}):h.postRegister(e).then((function(e){var n=e.data.result;t.setState({users:[].concat(Object(N.a)(r),[n]),count:c+1,addAccountVisible:!1,addAccountError:""}),v.a.info({title:"Password",content:Object(f.jsxs)("div",{children:["Password: ",n.password]})})})).catch((function(e){11e3===e.response.data.error.code&&t.setState({addAccountError:"Username already exists"})})):this.setState({addAccountError:"Username is empty"})}},{key:"render",value:function(){var e=this,t=this.state,n=t.users,r=t.searchValue,c=t.count,s=t.addAccountVisible,a=t.addAccountError,o=t.editAccountVisible,i=t.editAccountError,u=t.toBeEdited;return Object(f.jsxs)("div",{id:"users-page",children:[Object(f.jsxs)("div",{className:"header",children:[Object(f.jsxs)("div",{children:[Object(f.jsx)("input",{className:"search-input",placeholder:"Search",onChange:function(t){return e.setState({searchValue:t.target.value})},value:r}),Object(f.jsx)("button",{className:"add-account-button",onClick:function(){return e.setState({addAccountVisible:!0})},children:"Add Account"})]}),Object(f.jsxs)("div",{className:"user-stats",children:["Accounts: ",Object(f.jsx)("span",{className:"count",children:c})]})]}),Object(f.jsxs)("table",{children:[Object(f.jsx)("thead",{children:Object(f.jsxs)("tr",{children:[Object(f.jsx)("th",{children:"Username"}),Object(f.jsx)("th",{children:"Role"}),Object(f.jsx)("th",{children:"Operations"})]})}),Object(f.jsx)("tbody",{children:n.filter((function(e){return e.username.includes(r)})).map((function(t){return Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{children:t.username}),Object(f.jsx)("td",{children:t.userType}),Object(f.jsxs)("td",{children:[Object(f.jsx)("button",{className:"edit-button",onClick:function(){return e.setState({editAccountVisible:!0,toBeEdited:t})},children:Object(f.jsx)("img",{src:T,alt:"Edit"})}),Object(f.jsx)("button",{className:"delete-button",onClick:function(){return e.onDelete(t)},disabled:"admin"===t,children:Object(f.jsx)("img",{src:I,alt:"Delete"})})]})]})}))})]}),Object(f.jsx)(y,{visible:s,onOk:function(t){return e.addAccount(t)},onCancel:function(){return e.setState({addAccountVisible:!1,addAccountError:""})},errorMessage:a}),Object(f.jsx)(A,{user:u,visible:o,onOk:function(t,n,r,c,s,a){return e.onEdit(t,n,r,c,s,a)},onCancel:function(){return e.setState({editAccountVisible:!1,editAccountError:""})},errorMessage:i})]})}}]),n}(r.Component)),L=(n(233),function(){return Object(f.jsx)("div",{id:"admin-inventory",children:Object(f.jsx)("h1",{children:"Admin Inventory Page"})})}),K=(n(234),function(e){Object(o.a)(n,e);var t=Object(i.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).state={searchValue:"",items:[{name:"prod 1",supplier:"abc",quantity:10,datePurchased:"December 3, 2021"}]},r}return Object(a.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.searchValue,r=t.items;return Object(f.jsxs)("div",{id:"user-inventory",children:[Object(f.jsxs)("div",{className:"header",children:[Object(f.jsx)("input",{className:"search-input",placeholder:"Search",onChange:function(t){return e.setState({searchValue:t.target.value})},value:n}),Object(f.jsx)(f.Fragment,{})]}),Object(f.jsxs)("table",{children:[Object(f.jsx)("thead",{children:Object(f.jsxs)("tr",{children:[Object(f.jsx)("th",{children:"Product Name"}),Object(f.jsx)("th",{children:"Supplier"}),Object(f.jsx)("th",{children:"Quantity"}),Object(f.jsx)("th",{children:"Date Purchased"})]})}),Object(f.jsx)("tbody",{children:r.filter((function(e){return e.name.includes(n)})).map((function(e){return Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{children:e.name}),Object(f.jsx)("td",{children:e.supplier}),Object(f.jsx)("td",{children:e.quantity}),Object(f.jsx)("td",{children:e.datePurchased})]},e.name)}))})]})]})}}]),n}(r.Component)),B=(n(235),function(e){var t=e.updateUser,n=O(),c=Object(r.useState)(n.username),s=Object(x.a)(c,2),a=s[0],o=s[1],i=Object(r.useState)(""),u=Object(x.a)(i,2),l=u[0],d=u[1],j=Object(r.useState)(!1),b=Object(x.a)(j,2),p=b[0],v=b[1],g=Object(r.useState)(""),y=Object(x.a)(g,2),w=y[0],E=y[1],A=Object(r.useState)(""),C=Object(x.a)(A,2),P=C[0],k=C[1],N=Object(r.useState)(""),U=Object(x.a)(N,2),V=U[0],T=U[1];return Object(f.jsxs)("div",{id:"user-edit-account",children:[Object(f.jsx)("h1",{children:"Edit Account"}),Object(f.jsx)("input",{placeholder:"Username",value:a,onChange:function(e){return o(e.target.value)}}),Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),Object(f.jsx)(S.a,{checked:p,onChange:function(e){return v(e.target.checked)},children:"Edit Password"}),Object(f.jsx)("br",{}),Object(f.jsx)("input",{placeholder:"Previous Password",value:l,onChange:function(e){return d(e.target.value)},disabled:!p}),Object(f.jsx)("br",{}),Object(f.jsx)("input",{placeholder:"New Password",value:w,onChange:function(e){return E(e.target.value)},disabled:!p}),Object(f.jsx)("input",{placeholder:"Confirm New Password",value:P,onChange:function(e){return k(e.target.value)},disabled:!p}),Object(f.jsx)("div",{className:"error-message",children:V}),Object(f.jsx)("button",{className:"confirm-button",onClick:function(e){return function(e){if(e.preventDefault(),d(""),E(""),k(""),""!==a&&null!==a)if(a!==n.username){if(a.length<6)return T("Username has to be atleast 6 characters"),void o(n.username);if(a.length>30)return T("Username has to be atmost 30 characters"),void o(n.username);if(a.includes(" "))return T("Username cannot contain a space"),void o(n.username);if(p){if(""===l||null===l)return void T("Previous password cannot be empty");if(""===w||null===w)return void T("Previous password cannot be empty");if(""===P||null===P)return void T("Previous password cannot be empty");if(l.length<6||w.length<6||P.length<6)return void T("Password has to be atleast 6 characters");if(l.length>30||w.length>30||P.length>30)return void T("Password has to be atmost 30 characters");if(l===w&&l===P)return void T("Previous password and the new password is the same");if(w!==P)return void T("New password and confirm new password must be the same.")}h.patchUser(n._id,a,"user",p?l:null,p?w:null).then((function(e){var n=e.data.result;m(n),T(""),t(n.username),alert("Successfully edited the account")})).catch((function(e){var t=e.response.data;T(t)}))}else T("Username cannot be the same");else T("Username cannot be empty")(n.username)}(e)},children:"Confirm"})]})}),M=n(1),F=n(11),R="/inventory",J=["component"],_=function(e){var t=e.component,n=Object(F.a)(e,J);return Object(f.jsx)(l.b,Object(M.a)(Object(M.a)({},n),{},{render:function(e){return O()?"user"===O().userType?Object(f.jsx)(l.a,{to:{pathname:R,state:{from:e.location}}}):Object(f.jsx)(t,Object(M.a)({},e)):Object(f.jsx)(l.a,{to:{pathname:"/",state:{from:e.location}}})}}))},q=["component"],Q=function(e){var t=e.component,n=Object(F.a)(e,q);return Object(f.jsx)(l.b,Object(M.a)(Object(M.a)({},n),{},{render:function(e){return O()?Object(f.jsx)(t,Object(M.a)({},e)):Object(f.jsx)(l.a,{to:{pathname:"/",state:{from:e.location}}})}}))},W=["component"],z=function(e){var t=e.component,n=Object(F.a)(e,W);return Object(f.jsx)(l.b,Object(M.a)(Object(M.a)({},n),{},{render:function(e){return O()?"admin"===O().userType?Object(f.jsx)(l.a,{to:{pathname:"/users"}}):Object(f.jsx)(l.a,{to:{pathname:R}}):Object(f.jsx)(t,Object(M.a)({},e))}}))},G=(n(243),function(e){Object(o.a)(n,e);var t=Object(i.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).state={username:""},r}return Object(a.a)(n,[{key:"componentDidMount",value:function(){this.setState({username:O()?O().username:""})}},{key:"render",value:function(){var e=this,t=this.state.username;return Object(f.jsx)(u.a,{children:Object(f.jsxs)("div",{className:"app",children:[Object(f.jsxs)(l.d,{children:[Object(f.jsx)(_,{path:"/users",component:p}),Object(f.jsx)(Q,{path:"/inventory",component:function(){return Object(f.jsx)(p,{username:t})}}),Object(f.jsx)(Q,{path:"/edit",component:function(){return Object(f.jsx)(p,{username:t})}}),Object(f.jsx)(l.b,{path:"/",component:function(){return Object(f.jsx)(f.Fragment,{})}})]}),Object(f.jsxs)(l.d,{children:[Object(f.jsx)(_,{path:"/users",component:D}),Object(f.jsx)(Q,{path:"/inventory",component:O()?"user"===O().userType?K:L:null}),Object(f.jsx)(Q,{path:"/edit",component:function(){return Object(f.jsx)(B,{updateUser:function(t){return e.setState({username:t})}})}}),Object(f.jsx)(z,{path:"/",component:P})]})]})})}}]),n}(r.Component));Object(c.render)(Object(f.jsx)(G,{}),document.getElementById("root"))}},[[244,1,2]]]);
//# sourceMappingURL=main.0ca3ed26.chunk.js.map